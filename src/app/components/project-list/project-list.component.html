<div class="project-list">
  <div class="project-list-header">
    <h1>Projekte</h1>
    <div class="project-options">
      <mat-form-field>
        <mat-select (selectionChange)="filterProjectsByStatus($event)" placeholder="Status">
          <mat-option>Alle</mat-option>
          <mat-option *ngFor="let status of allStatus" [value]="status">{{
            status.charAt(0).toUpperCase() + status.slice(1).toLowerCase()
          }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <input (keyup)="filterProjectsByName($event)" matInput placeholder="Suche" />
      </mat-form-field>
      <button
        (click)="openProjectDialog(null)"
        *ngIf="hasPermission"
        class="no-hover"
        mat-icon-button
      >
        <mat-icon>add</mat-icon>
      </button>
    </div>
  </div>
  <mat-card *ngFor="let project of projects">
    <mat-card-header>
      <mat-card-subtitle>Bezeichnung</mat-card-subtitle>
      <mat-card-title>{{ project.name }}</mat-card-title>
      <mat-card-subtitle>Status</mat-card-subtitle>
      <mat-card-title>
        <div
          [class.abgeschlossen]="project.status === 'ABGESCHLOSSEN'"
          [class.geplant]="project.status === 'GEPLANT'"
          class="status"
        >
          {{ project.status.charAt(0).toUpperCase() + project.status.slice(1).toLowerCase() }}
        </div>
      </mat-card-title>
      <mat-card-subtitle>Kurze Beschreibung</mat-card-subtitle>
      <mat-card-title>{{ project.shortDescription }}</mat-card-title>
      <mat-card-subtitle>Betreuungsperson</mat-card-subtitle>
      <mat-card-title>
        {{ project.supervisorName }}
      </mat-card-title>
      <mat-card-subtitle>Tags</mat-card-subtitle>
      <mat-card-subtitle
        ><br />
        <mat-chip-list>
          <mat-chip *ngFor="let tag of project.tags">{{ tag.tagName }}</mat-chip>
          <mat-chip *ngIf="!project.tags.length">Keine Tags vorhanden</mat-chip>
        </mat-chip-list>
      </mat-card-subtitle>
      <mat-card-subtitle>
        <br />
        <mat-divider></mat-divider>
        <br />
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-actions>
      <button mat-button routerLink="/projects/{{ project.id }}">
        Details
      </button>
      <button
        (click)="deleteProject(project)"
        *ngIf="hasPermission"
        class="no-hover"
        id="project-remove-button"
        mat-icon-button
      >
        <mat-icon>delete_forever</mat-icon>
      </button>
      <button
        (click)="openProjectDialog(project)"
        *ngIf="hasPermission"
        class="no-hover"
        id="project-edit-button"
        mat-icon-button
      >
        <mat-icon>edit</mat-icon>
      </button>
    </mat-card-actions>
  </mat-card>
  <mat-paginator [length]="totalProjects" [pageSize]="10" [pageSizeOptions]="[10, 25, 50]">
  </mat-paginator>
</div>
